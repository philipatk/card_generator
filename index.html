<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/card.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
    <title>Card Gen</title>
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script >
    function screenshot(){
        html2canvas(document.getElementById('card')).then(function(canvas) {
            document.body.appendChild(canvas);
        });
    }
    function download (){
        function saveAs(uri, filename) {
        var link = document.createElement('a');
        if (typeof link.download === 'string') {
            link.href = uri;
            link.download = filename;

            //Firefox requires the link to be in the body
            document.body.appendChild(link);

            //simulate click
            link.click();

            //remove the link when done
            document.body.removeChild(link);

        } else {

            window.open(uri);

        }
        }
        html2canvas(document.getElementById("card")).then(function(canvas) {

        saveAs(canvas.toDataURL(), 'file-name.png');
        });
    } 
    function uploadImage() {
    const input = document.getElementById('imageUpload');

    input.onchange = function(e) {
      const file = e.target.files[0];
      const reader = new FileReader();

      reader.onload = function() {
        const img = document.getElementById('selectedImage');
        img.src = reader.result;
        img.style.display = 'block';
      };

      reader.readAsDataURL(file);
    };

    input.click(); // Simulate a click to trigger file selection
    }  
    </script>
    <div id="card" class="card">
        <div class="card_type">
            <p class="mana">Mana</p>
            <img src="img/turn (yellowish).png" alt="turn" height="50px">
        </div>
        <div class="card_range">30ft</div>
        <div class="card_name">
            <h4>Title</h4>
        </div>
        <div class="card_img">
            <img id="selectedImage" src="img/A (((mage))) de 1 (1).png" alt="imige of card" height="600" >
        </div>
        <div class="text-div">
            <h6>Lorem ipsum dolor sit, amet consectetuLorem ipsum dolor sit, amet consecteturLorem ipsum dolor sit, amet consecteturLorem ipsum dolor sit, amet consecteturLorem ipsum dolor sit, amet consecteturr adipisicing elit. Molestias doloremque quasi ratione quae dolorum labore</h6>
        </div>
        <div class="card_weapon">short shord</div>
    </div>
    <button id="download-btn" onclick="download()" >download</button>
    <input type="file" id="imageUpload" accept="image/*">
    <button onclick="uploadImage()">Upload Image</button>
    <br><br>
</body>
</html>